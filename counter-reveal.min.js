class Counter{constructor(t,e){this.element=t,this.options={origin:0,target:100,type:"numeric",duration:1500,suffix:null,classes:{bar:"counter-bar",number:"counter-number"},...e},this.init()}init(){document.querySelectorAll(this.element).forEach(t=>{const e=Object.keys(t.dataset).filter(t=>t.startsWith("counter")).reduce((e,r)=>(e[r.replace("counter","").toLowerCase()]=r.includes("Origin")||r.includes("Target")||r.includes("Duration")?+t.dataset[r]:t.dataset[r],e),{}),r={...this.options,...e};this.run(t,r),document.addEventListener("scroll",this.run.bind(this,t,r))})}run(t,e){const r=t.offsetTop-window.innerHeight,i=t.offsetTop+t.clientHeight;window.scrollY<r||window.scrollY>i||t.hasAttribute("data-counter-complete")||("numeric"==e.type?this.startNumeric(t,e):"bar"==e.type?this.startBar(t,e):"both"==e.type&&(Object.values(e.classes).forEach(e=>{t.querySelector(`.${e}`)||(t.innerHTML+=`<div class="${e}"></div>`)}),this.startNumeric(t,e,!0),this.startBar(t,e,!0)),t.setAttribute("data-counter-complete","true"))}startNumeric(t,e,r=!1){r&&(t=t.querySelector(`.${e.classes.number}`));const i=+t.innerText||e.origin;let n;const s=r=>{n=n||r;const o=Math.min((r-n)/e.duration,1);let a=Math.floor(o*(e.target-i)+i);"function"==typeof e.format&&(a=e.format(a)),t.innerHTML=a+e.suffix,o<1?window.requestAnimationFrame(s):window.cancelAnimationFrame(window.requestAnimationFrame(s))};window.requestAnimationFrame(s)}startBar(t,e,r=!1){r&&(t=t.querySelector(`.${this.options.classes.bar}`)),t.animate([{width:`${100*e.origin/e.target}%`},{width:"100%"}],{duration:e.duration,iterations:1})}}